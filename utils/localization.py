from typing import Dict, Any

TEXTS = {
    "ru": {
        "welcome": "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ú–µ–¥–ù–∞–ø–æ–º–∏–Ω–∞–ª–∫—É! –Ø –±—É–¥—É –ø–æ–º–æ–≥–∞—Ç—å –≤–∞–º –Ω–µ –∑–∞–±—ã–≤–∞—Ç—å –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ª–µ–∫–∞—Ä—Å—Ç–≤–∞ –≤–æ–≤—Ä–µ–º—è.",
        "language_selected": "–í—ã –≤—ã–±—Ä–∞–ª–∏ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫.",
        "select_language": "–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ / Select language:",
        "main_menu": "–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:",
        "add_pill": "–î–æ–±–∞–≤–∏—Ç—å –ª–µ–∫–∞—Ä—Å—Ç–≤–æ",
        "today_pills": "–õ–µ–∫–∞—Ä—Å—Ç–≤–∞ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è",
        "settings": "–ù–∞—Å—Ç—Ä–æ–π–∫–∏",
        "subscription": "–ü–æ–¥–ø–∏—Å–∫–∞",
        "enter_pill_name": "–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞:",
        "select_schedule": "–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–∂–∏–º –ø—Ä–∏—ë–º–∞:",
        "morning": "–£—Ç—Ä–æ",
        "day": "–î–µ–Ω—å",
        "evening": "–í–µ—á–µ—Ä",
        "custom_time": "–°–≤–æ—ë –≤—Ä–µ–º—è",
        "select_time": "–í—ã–±–µ—Ä–∏—Ç–µ –≤—Ä–µ–º—è –ø—Ä–∏—ë–º–∞:",
        "enter_custom_time": "–í–≤–µ–¥–∏—Ç–µ —Å–≤–æ—ë –≤—Ä–µ–º—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ –ß–ß:–ú–ú (–Ω–∞–ø—Ä–∏–º–µ—Ä, 08:30):",
        "invalid_time_format": "–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–æ—Ä–º–∞—Ç –ß–ß:–ú–ú (–Ω–∞–ø—Ä–∏–º–µ—Ä, 08:30).",
        "pill_added": "–õ–µ–∫–∞—Ä—Å—Ç–≤–æ {name} –¥–æ–±–∞–≤–ª–µ–Ω–æ –Ω–∞ {time}",
        "no_pills_today": "–ù–∞ —Å–µ–≥–æ–¥–Ω—è –Ω–µ—Ç –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ª–µ–∫–∞—Ä—Å—Ç–≤.",
        "today_checklist": "–í–∞—à —á–µ–∫-–ª–∏—Å—Ç –Ω–∞ —Å–µ–≥–æ–¥–Ω—è ({date}):",
        "morning_pills": "üåÖ –£—Ç—Ä–æ:",
        "day_pills": "‚òÄÔ∏è –î–µ–Ω—å:",
        "evening_pills": "üåô –í–µ—á–µ—Ä:",
        "pill_item": "{name} - {time}",
        "mark_as_taken": "‚úÖ –ü—Ä–∏–Ω—è—Ç–æ",
        "marked_as_taken": "–û—Ç–º–µ—á–µ–Ω–æ –∫–∞–∫ –ø—Ä–∏–Ω—è—Ç–æ: {name}",
        "reminder": "–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ: –ü–æ—Ä–∞ –ø—Ä–∏–Ω—è—Ç—å {name}!",
        "reminder_repeat": "–ù–∞–ø–æ–º–∏–Ω–∞—é: –í—ã –µ—â—ë –Ω–µ –æ—Ç–º–µ—Ç–∏–ª–∏ –ø—Ä–∏—ë–º –ª–µ–∫–∞—Ä—Å—Ç–≤–∞ {name}!",
        "subscription_info": "–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–ø–∏—Å–∫–µ:",
        "free_plan": "–£ –≤–∞—Å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω. –†–µ–∫–ª–∞–º–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è—Ö.",
        "premium_plan": "–£ –≤–∞—Å –ø—Ä–µ–º–∏—É–º-–ø–æ–¥–ø–∏—Å–∫–∞ –¥–æ {date}.",
        "lifetime_plan": "–£ –≤–∞—Å –±–µ—Å—Å—Ä–æ—á–Ω–∞—è –ø—Ä–µ–º–∏—É–º-–ø–æ–¥–ø–∏—Å–∫–∞.",
        "subscription_plans": "–ü–ª–∞–Ω—ã –ø–æ–¥–ø–∏—Å–∫–∏:",
        "monthly_plan": "–ú–µ—Å—è—á–Ω–∞—è - 99‚ÇΩ",
        "yearly_plan": "–ì–æ–¥–æ–≤–∞—è - 799‚ÇΩ",
        "lifetime_plan_purchase": "–ë–µ—Å—Å—Ä–æ—á–Ω–∞—è - 1999‚ÇΩ",
        "subscription_expiring": "–í–∞—à–∞ –ø–æ–¥–ø–∏—Å–∫–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç –∑–∞–≤—Ç—Ä–∞. –ñ–µ–ª–∞–µ—Ç–µ –ø—Ä–æ–¥–ª–∏—Ç—å?",
        "subscription_expired": "–í–∞—à–∞ –ø–æ–¥–ø–∏—Å–∫–∞ –∏—Å—Ç–µ–∫–ª–∞. –¢–µ–ø–µ—Ä—å –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω —Å —Ä–µ–∫–ª–∞–º–æ–π.",
        "payment_success": "–û–ø–ª–∞—Ç–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ! –í–∞—à–∞ –ø–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞.",
        "payment_failed": "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–ø–ª–∞—Ç–µ. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ –ø–æ–∑–∂–µ.",
        "admin_welcome": "–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞. –í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:",
        "admin_stats": "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞",
        "admin_users": "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏",
        "admin_logs": "–õ–æ–≥–∏ –∏ –æ—Ç—á—ë—Ç—ã",
        "admin_stats_info": "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–æ—Ç–∞:\n\n–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: {total_users}\n–ê–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (7 –¥–Ω–µ–π): {active_users}\n–ü—Ä–µ–º–∏—É–º-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: {premium_users}\n–°—Ä–µ–¥–Ω–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–µ–∫–∞—Ä—Å—Ç–≤ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {avg_pills}\n–î–æ—Ö–æ–¥ –∑–∞ –º–µ—Å—è—Ü: {monthly_income}‚ÇΩ",
        "admin_ban_success": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {user_id} –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω.",
        "admin_unban_success": "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {user_id} —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω.",
        "admin_extend_success": "–ü–æ–¥–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è {user_id} –ø—Ä–æ–¥–ª–µ–Ω–∞ –Ω–∞ {days} –¥–Ω–µ–π.",
        "user_blocked": "–í—ã –±—ã–ª–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É –¥–ª—è –≤—ã—è—Å–Ω–µ–Ω–∏—è –ø—Ä–∏—á–∏–Ω.",
        # "ad_banner": "üîç –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–¥–æ—Ä–æ–≤—å—è! –°–∫–∞—á–∞–π—Ç–µ —Å–µ–π—á–∞—Å: health-app.com",
        "my_medications": "–ú–æ–∏ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞",
        "your_medications": "–í–∞—à–∏ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞:",
        "no_medications": "–í—ã –µ—â–µ –Ω–µ –¥–æ–±–∞–≤–∏–ª–∏ –Ω–∏ –æ–¥–Ω–æ–≥–æ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞.",
        "custom_pills": "üïí –°–≤–æ—ë –≤—Ä–µ–º—è:",
        "manage_medications": "–ß—Ç–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–¥–µ–ª–∞—Ç—å?",
        "delete_medication": "–£–¥–∞–ª–∏—Ç—å –ª–µ–∫–∞—Ä—Å—Ç–≤–æ",
        "select_medication_to_delete": "–í—ã–±–µ—Ä–∏—Ç–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–æ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è:",
        "cancel": "–û—Ç–º–µ–Ω–∞",
        "deletion_cancelled": "–û–ø–µ—Ä–∞—Ü–∏—è –æ—Ç–º–µ–Ω–µ–Ω–∞.",
        "medication_not_found": "–õ–µ–∫–∞—Ä—Å—Ç–≤–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.",
        "confirm_delete_medication": "–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å {name}?",
        "confirm_delete": "–î–∞, —É–¥–∞–ª–∏—Ç—å",
        "medication_deleted": "–õ–µ–∫–∞—Ä—Å—Ç–≤–æ {name} —É–¥–∞–ª–µ–Ω–æ.",
        "reminder_settings": "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π",
        "reminders_enabled": "–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –≤–∫–ª—é—á–µ–Ω—ã",
        "reminders_disabled": "–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ—Ç–∫–ª—é—á–µ–Ω—ã",
        "enable_reminders": "–í–∫–ª—é—á–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è",
        "disable_reminders": "–û—Ç–∫–ª—é—á–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è",
        "reminder_repeat_time": "–ü–æ–≤—Ç–æ—Ä—è—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ —á–µ—Ä–µ–∑:",
        "5_minutes": "5 –º–∏–Ω—É—Ç",
        "15_minutes": "15 –º–∏–Ω—É—Ç",
        "30_minutes": "30 –º–∏–Ω—É—Ç",
        "reminder_settings_updated": "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –æ–±–Ω–æ–≤–ª–µ–Ω—ã",
        "take_now": "–ü—Ä–∏–Ω—è—Ç—å —Å–µ–π—á–∞—Å",
        "snooze": "–û—Ç–ª–æ–∂–∏—Ç—å",
        "disable_this_reminder": "–û—Ç–∫–ª—é—á–∏—Ç—å —ç—Ç–æ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ",
        "reminder_disabled": "–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ",
        "snoozed_for": "–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ—Ç–ª–æ–∂–µ–Ω–æ –Ω–∞ {minutes} –º–∏–Ω—É—Ç",
        "change_language": "–°–º–µ–Ω–∏—Ç—å —è–∑—ã–∫",
        "limit_reached": "–í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ 5 –ª–µ–∫–∞—Ä—Å—Ç–≤. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ Premium –¥–ª—è —Å–Ω—è—Ç–∏—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π.",
        "premium_status_active": "üåü –í–∞—à Premium –∞–∫—Ç–∏–≤–µ–Ω –¥–æ {expiry_date}",
        "premium_status_inactive": "üîí Premium –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω",
        "trial_activated": "üéÅ –í—ã –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª–∏ 30-–¥–Ω–µ–≤–Ω—ã–π –ø—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥ Premium!",
    },
    "en": {
        "welcome": "Welcome to MedReminder! I will help you remember to take your medications on time.",
        "language_selected": "You have selected English language.",
        "select_language": "Select language / –í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫:",
        "main_menu": "Main menu:",
        "add_pill": "Add medication",
        "today_pills": "Today's medications",
        "settings": "Settings",
        "subscription": "Subscription",
        "enter_pill_name": "Enter the medication name:",
        "select_schedule": "Select intake schedule:",
        "morning": "Morning",
        "day": "Day",
        "evening": "Evening",
        "custom_time": "Custom time",
        "select_time": "Select intake time:",
        "enter_custom_time": "Enter your custom time in HH:MM format (e.g., 08:30):",
        "invalid_time_format": "Invalid time format. Please use HH:MM format (e.g., 08:30).",
        "pill_added": "Medication {name} added at {time}",
        "no_pills_today": "No medications scheduled for today.",
        "today_checklist": "Your checklist for today ({date}):",
        "morning_pills": "üåÖ Morning:",
        "day_pills": "‚òÄÔ∏è Day:",
        "evening_pills": "üåô Evening:",
        "pill_item": "{name} - {time}",
        "mark_as_taken": "‚úÖ Taken",
        "marked_as_taken": "Marked as taken: {name}",
        "reminder": "Reminder: Time to take {name}!",
        "reminder_repeat": "Reminder: You haven't marked {name} as taken yet!",
        "subscription_info": "Subscription information:",
        "free_plan": "You have a free plan. Ads are shown in reminders.",
        "premium_plan": "You have a premium subscription until {date}.",
        "lifetime_plan": "You have a lifetime premium subscription.",
        "subscription_plans": "Subscription plans:",
        "monthly_plan": "Monthly - $1.99",
        "yearly_plan": "Yearly - $9.99",
        "lifetime_plan_purchase": "Lifetime - $24.99",
        "subscription_expiring": "Your subscription expires tomorrow. Would you like to renew?",
        "subscription_expired": "Your subscription has expired. You are now using the free plan with ads.",
        "payment_success": "Payment successful! Your subscription has been activated.",
        "payment_failed": "Payment failed. Please try again later.",
        "admin_welcome": "Admin panel. Choose an action:",
        "admin_stats": "Statistics",
        "admin_users": "User management",
        "admin_logs": "Logs and reports",
        "admin_stats_info": "Bot statistics:\n\nTotal users: {total_users}\nActive users (7 days): {active_users}\nPremium users: {premium_users}\nAverage medications per user: {avg_pills}\nMonthly income: ${monthly_income}",
        "admin_ban_success": "User {user_id} has been banned.",
        "admin_unban_success": "User {user_id} has been unbanned.",
        "admin_extend_success": "User {user_id} subscription extended by {days} days.",
        "user_blocked": "You have been blocked by the administrator. Please contact support for more information.",
        # "ad_banner": "üîç Try the new health tracking app! Download now: health-app.com",
        "my_medications": "My medications",
        "your_medications": "Your medications:",
        "no_medications": "You haven't added any medications yet.",
        "custom_pills": "üïí Custom time:",
        "manage_medications": "What would you like to do?",
        "delete_medication": "Delete medication",
        "select_medication_to_delete": "Select medication to delete:",
        "cancel": "Cancel",
        "deletion_cancelled": "Operation cancelled.",
        "medication_not_found": "Medication not found.",
        "confirm_delete_medication": "Are you sure you want to delete {name}?",
        "confirm_delete": "Yes, delete",
        "medication_deleted": "Medication {name} has been deleted.",
        "reminder_settings": "Reminder Settings",
        "reminders_enabled": "Reminders are enabled",
        "reminders_disabled": "Reminders are disabled",
        "enable_reminders": "Enable reminders",
        "disable_reminders": "Disable reminders",
        "reminder_repeat_time": "Repeat reminder after:",
        "5_minutes": "5 minutes",
        "15_minutes": "15 minutes",
        "30_minutes": "30 minutes",
        "reminder_settings_updated": "Reminder settings updated",
        "take_now": "Take now",
        "snooze": "Snooze",
        "disable_this_reminder": "Disable this reminder",
        "reminder_disabled": "Reminder disabled",
        "snoozed_for": "Reminder snoozed for {minutes} minutes",
        "change_language": "Change language",
        "limit_reached": "You can't add more than 5 medications. Upgrade to Premium for unlimited access.",
        "premium_status_active": "üåü –í–∞—à Premium –∞–∫—Ç–∏–≤–µ–Ω –¥–æ {expiry_date}",
        "premium_status_inactive": "üîí Premium –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω",
        "trial_activated": "üéÅ –í—ã –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª–∏ 30-–¥–Ω–µ–≤–Ω—ã–π –ø—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥ Premium!",
    }
}

def get_text(key: str, language: str, **kwargs: Any) -> str:
    """Get localized text by key and language with optional formatting"""
    language = language if language in TEXTS else "en"
    text = TEXTS[language].get(key, TEXTS["en"].get(key, f"Missing text for: {key}"))
    if kwargs:
        return text.format(**kwargs)
    return text
